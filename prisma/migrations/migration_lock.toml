# Please do not edit this file manually
# It should be added in your version-control system (e.g., Git)
provider = "postgresql"

-- Funci√≥n idempotente (redefine si ya existe)
CREATE OR REPLACE FUNCTION public.generate_ticket_number()
RETURNS bigint
LANGUAGE sql
AS $$
  SELECT nextval('public.ticket_number_seq');
$$;

-- (Opcional) endurecer permisos en prod:
-- REVOKE USAGE, SELECT ON SEQUENCE public.ticket_number_seq FROM PUBLIC;
-- GRANT USAGE, SELECT ON SEQUENCE public.ticket_number_seq TO <tu_rol_api>;
