{
  "permissions": {
    "allow": [
      "Bash(npm run prisma:generate:*)",
      "Bash(npm run migrate:dev:*)",
      "Bash(npm run typecheck:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(npx prisma validate:*)",
      "Bash(timeout 10 tail:*)",
      "Bash(npx prisma format:*)",
      "Bash(npx prisma migrate:*)",
      "Bash(npx prisma:*)",
      "Bash(timeout 5 tail:*)",
      "Bash(git restore:*)",
      "Bash(git tag -a v1.0.0 -m \"$(cat <<''EOF''\nRelease v1.0.0 - Commission System & Sales Analytics\n\nThis is the first stable release of the Banca Management Backend, marking the completion of the MVP with the addition of a comprehensive commission system.\n\nðŸŽ¯ Highlights\n\nâœ… Hierarchical commission system with JSON policies\nâœ… Immutable commission snapshots per bet (jugada)\nâœ… 6 new CRUD endpoints for policy management\nâœ… Extended sales analytics with commission metrics\nâœ… Complete documentation and migration guide\nâœ… Zero-downtime error handling\n\nðŸ“¦ New Features\n\nCommission System:\n- JSON-based commission policies (version 1)\n- Hierarchical resolution: USER â†’ VENTANA â†’ BANCA\n- First-match-wins rule evaluation\n- Support for loterÃ­a, betType, and multiplier range filters\n- Temporal validity (effectiveFrom/effectiveTo)\n- Auto-UUID generation for rules\n\nDatabase Schema:\n- commissionPolicyJson in Banca, Ventana, User (JSONB)\n- commissionPercent, commissionAmount, commissionOrigin, commissionRuleId in Jugada\n\nAPI Endpoints:\n- PUT/GET /api/v1/bancas/:id/commission-policy\n- PUT/GET /api/v1/ventanas/:id/commission-policy\n- PUT/GET /api/v1/users/:id/commission-policy\n\nSales Analytics Extensions:\n- /api/v1/ventas/summary with commissionTotal & netoDespuesComision\n- /api/v1/ventas/breakdown with commission metrics per dimension\n- /api/v1/ventas/timeseries with commission data\n\nðŸ“š Documentation\n\n- docs/COMMISSION_SYSTEM.md - Complete commission system guide\n- README.md - Updated with commission section\n- CHANGELOG.md - Detailed release notes\n\nðŸ”§ Migration\n\nRun: npx prisma migrate deploy && npx prisma generate\n\nâš ï¸ Breaking Changes\n\nNone - This is a backwards-compatible addition.\n\nðŸ™ Credits\n\nDeveloped by Mario QuirÃ³s Pizarro (@MQuirosP)\nWith assistance from Claude Code\nEOF\n)\")",
      "Bash(gh:*)",
      "Bash(git push:*)",
      "Bash(tree:*)",
      "Bash(npm run dev)",
      "Bash(node -e:*)",
      "Read(//c/Users/mquir/Proyectos/Bancas/**)",
      "Read(//c/Users/mquir/**)",
      "Bash(git log:*)",
      "Bash(test:*)",
      "Bash(awk:*)"
    ],
    "deny": [],
    "ask": []
  }
}
